# üñß IPLD Weekly Sync üôåüèΩ 2021-01-11

- **Lead:** @rvagg
- **Notetaker:** @rvagg
- **Attendees:**
  - @rvagg 
  - @mvdan 
  - @mikeal
  - @ribasushi
  - @warpfork 
  - @aschmahmann 
  - @carsonfarmer
- **Recording:** https://www.youtube.com/watch?v=UrAbblAgm-E

## Agenda

- General
  - Start recording
  - Start live stream
  - Find a notetaker
  - Ask everyone to put their name into the list of attendees
  - Ask everyone to put their items that they've been working on the past two weeks (should be done prior to the meeting)
  - Ask for last minute agenda items
- This meeting
  - Why do we continue pressing on floats?
  - Encryption
  - _add your agenda item_


## Weekly Update

@rvagg
 - New CBOR library finally released https://github.com/rvagg/cborg
 - @ipld/dag-cbor upgrade proposal https://github.com/ipld/js-dag-cbor/pull/13 - will merge once NaN, Infinity issue is sorted and there is no disagreement
 - Proposal to rule out IEEE 754 specials (NaN, Infinity) from data model and add clarification about number types https://github.com/ipld/specs/pull/344
 - Additional strictness clarifications for DAG-CBOR https://github.com/ipld/specs/pull/345

@mvdan 
- spoke to Adin about go-ds-badger, go-ds-badger2, and the upcoming badger/v3
- published my spin on Eric's fluent/quip Go API: https://github.com/ipld/go-ipld-prime/pull/138
- after talking to Mikeal and Eric, started drafting the "CI best practices for Go" markdown doc. PR coming tomorrow.
- started playing with https://github.com/filecoin-project/go-hamt-ipld and thinking of how to write compliance tests with go-ipld-adl-hamt. thoughts welcome.
- did some more patches to reduce the amount of vet warning noise in code generated by ipld-prime

@mikeal
- IPSQL
  - [CSV imports](https://github.com/mikeal/IPSQL/blob/master/docs/importing-csv.md)
  - [mutations](https://github.com/mikeal/IPSQL/blob/master/docs/create-and-insert.md)
  - [encryption](https://github.com/mikeal/IPSQL/blob/master/docs/encryption.md)
- [encrypted blocks](https://github.com/mikeal/encrypted-block)
- sketch of an idea for [wasm in ipld](https://github.com/mikeal/ipld-wasm)

@ribasushi
- SQLotus
    - Incorporated extra feedback from sentinel folk and added reqs from finance ( Rod's feedback still pending )
    - Got things to the proper performance envelope ( 10x epoch-time )
    - New design is prone to deadlocks, likely to be tackled early this week
    - New attempt at mainnet Wed-ish

@warpfork
- go-ipld-prime helper function research: "quip": https://github.com/ipld/go-ipld-prime/pull/134
- working towards connecting the `schema` package to the `schemadmt` package in go-ipld-prime
	- quest purpose: connecting these mean we get to use schema JSON input to power things like codegen!
	- has turned out more difficult than expected: prior intended approach flunked out.
		- prior approach was: let's write thin wrappers around the `schemadmt` types, and this will get is immutability and a lot of other stuff for free, be low on copying, etc, generally result in a minimal amount of code.
		- flunk by: the import cycle detector!  Generated code imports the `schema` package because all its nodes implement `schema.TypedNode` (and that interface refers to `schema.Type`, so, it's really required indeed).
	- new approach:
		- three(ish) packages:
			- `schema/dmt` package: contains the generated code that can parse schemas.
			- `schema/compiler` package: contains exported functions which can be used to create reifed `schema.*` values.  `schema/dmt` can call into this.
			- `schema` package: contains just the interfaces
		- still grinding some of this this out.  May combine `schema/compiler` and `schema`, and just swallow the potential user confusion about what's meant to be used and what's not so much.
	- probably about 85% done here, should finish in the next few days.

@aschmahmann 
 - Wrote up more thoughts on last week's discussion on the big-file sharing thing re bitswap https://github.com/protocol/beyond-bitswap/pull/29

## Notes

### Encryption

@mikeal: in considering encryption in the past we've been focusing too much on the key negotation in the link-loader which has bogged us down. We have also been complicating the block storage layer in our thinking too much - it would be easier if we could deal with a storage layer that could provide unencrypted blocks rather than pushing the concern up a level.
@mikeal: after discussion with Carson, came up with an encrypted block scheme that is a new codec with a simple encrypted layout {cid,bytes} wrapped in an encrypted envelope that provides for an IV and can support major encryption schemes.
@mikeal: when dealing with encrypted block storage, you provide your IV and key and it will create a "private block store" that contains all of the encrypted blocks from the original store in decrypted form once you provide the key.

See https://github.com/mikeal/encrypted-block for details.

Further discussion about current proposal and tradeoffs.

There is a meeting coming up in in ~42h from this meeting titled "IPFS / IPLD Security & Encryption Workshop" that will take this discussion further and includes ecosystem users and implementers: https://github.com/ipfs/roadmap/issues/65#issuecomment-743297055

### Floats

@ribasushi: why are we persisting with float as a key part of the data model if we continue to undermine its suitability?

Discussion about state of play.

Agreed that more recommendation wording and examples would be good, expand on https://github.com/ipld/specs/pull/344
